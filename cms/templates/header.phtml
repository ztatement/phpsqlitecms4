<?php
// Initialisieren der Variablen, falls sie nicht gesetzt sind
$page_title = $page_title ?? null;
$title = $title ?? $settings['website_title']; // Fallback auf den Standardtitel
$description = $description ?? $settings['default_description']; // Fallback
$keywords = $keywords ?? $settings['default_keywords']; // Fallback
$user_type = $user_type ?? 0;
?>
<!DOCTYPE html>
<html lang="<?= htmlspecialchars(html_entity_decode($lang['lang'])); ?>" dir="<?= htmlspecialchars($lang['dir']); ?>" data-bs-theme="light">
<head>
  <!-- Required meta tags -->
  <meta charset="<?= htmlspecialchars(html_entity_decode($lang['charset'])); ?>">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <!-- Bootstrap CSS -->
    <!-- bootstrap@5.3.3 -->
  <!--link href="< ?= #BOOTSTRAP_CSS; ?>" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous"-->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
  <!--link rel="stylesheet" href="<#?= htmlspecialchars(BOOTSTRAP_CSS_LOCAL); ?>" crossorigin="anonymous"-->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css" crossorigin="anonymous">

    <?php if ($user_type == 0): ?>
        <!-- Frontend: Titel für alle Benutzer, wenn sie nicht Admin sind -->
        <title>
            <?= htmlspecialchars($page_title ?? ($title ? $title . ' - ' : '') . $settings['website_title']); ?>
        </title>
    <?php else: ?>
        <!-- Backend: Titel nur, wenn der Benutzer Admin ist -->
        <?php if ($admin): ?>
            <title>
                <?= htmlspecialchars($settings['website_title']); ?> - <?= htmlspecialchars($lang['administration']); ?>
                <?= isset($subtitle) ? ' - ' . htmlspecialchars($subtitle) : ''; ?>
            </title>
        <?php endif; ?>
    <?php endif; ?>

    <!-- Meta-Tags für SEO -->
    <meta name="description" content="<?= htmlspecialchars($description ?? $settings['default_description']); ?>">
    <meta name="keywords" content="<?= htmlspecialchars($keywords ?? $settings['default_keywords']); ?>">
    <meta name="generator" content="phpSQLiteCMS <?= htmlspecialchars($settings['version']); ?>">

    <!-- Open Graph Meta-Tags (für bessere Darstellung in sozialen Netzwerken) -->
    <meta property="og:title" content="<?= htmlspecialchars($page_title ?? $settings['website_title']); ?>">
    <meta property="og:description" content="<?= htmlspecialchars($description ?? $settings['default_description']); ?>">
    <meta property="og:image" content="<?= htmlspecialchars(STATIC_URL . 'img/og-image.png'); ?>"> <!-- Beispielbild, falls vorhanden -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="<?= htmlspecialchars(BASE_URL . $_SERVER['REQUEST_URI']); ?>">

    <!-- Twitter Card Meta-Tags -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="<?= htmlspecialchars($page_title ?? $settings['website_title']); ?>">
    <meta name="twitter:description" content="<?= htmlspecialchars($description ?? $settings['default_description']); ?>">
    <meta name="twitter:image" content="<?= htmlspecialchars(STATIC_URL . 'img/og-image.png'); ?>">

    <!-- Custom styles for this template -->
    <link href="<?= htmlspecialchars(THEME_DIR . 'css/style.css'); ?>" rel="stylesheet">
    <link href="<?= htmlspecialchars(STATIC_URL . 'fonts/z-Icon/z-icon-style.css'); ?>" rel="stylesheet">
    <link rel="stylesheet" href="<?= htmlspecialchars(ANIMATE); ?>" crossorigin="anonymous">
    <link rel="shortcut icon" href="<?= htmlspecialchars(STATIC_URL); ?>img/favicon.png">

  <!-- Github Stargazers -->
  <!--link href="<#?= htmlspecialchars(THEME_DIR . 'css/stargazers.css'); ?>" rel="stylesheet"-->
  <!-- ./Github Stargazers -->

    <!-- Custom styles admin-template -->
    <?php if ($admin): ?>
        <link href="<?= htmlspecialchars(THEME_DIR . 'css/style_admin.css'); ?>" rel="stylesheet">
    <?php endif; ?>

 </head>
